# Snyk pipe parameters and values (Bitbucket Cloud)

## Snyk pipe variables to configure

The following is the Snyk pipe that should be configured as part of a pipeline YAML file in order to include vulnerability scanning as part of your CI/CD workflow:

`- pipe: snyk/snyk-scan:0.4.6`

**Variables to configure:**

SNYK\_TOKEN: It is preferable to encrypt this value and enter the string $SNYK\_TOKEN only in the pipeline. See the table that follows for more information.

LANGUAGE: Required unless you use the snyk-cli image

IMAGE\_NAME: Only required if LANGUAGE set to 'docker'

CODE\_INSIGHTS\_RESULTS: Optional. Default: false

SNYK\_TEST\_JSON\_INPUT: Optional. Default: false

DONT\_BREAK\_BUILD: Optional

MONITOR: Optional

SEVERITY\_THRESHOLD: Optional

ORGANIZATION: Optional

PROJECT\_FOLDER: Optional

TARGET\_FILE: Optional

EXTRA\_ARGS: Optional

DEBUG: Optional

## Snyk pipe parameters

{% hint style="info" %}
In order to use a custom API, set the \*\*`SNYK_API` \*\* environment variable to the URL of the API.
{% endhint %}

| **Parameter**           | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| SNYK\_TOKEN             | <p>Enter the Snyk API token, which you can retrieve from your Snyk Account settings.</p><p>We recommend you encrypt the token: you can add it as a predefined variable in a separate part of the Bitbucket pipes directory:</p><ol><li>From the build directory, navigate to add a new Repository value, name the parameter “SNYK_TOKEN” and enter your API token from Snyk as the value.</li><li><p>From the pipeline YAML file that you're building, enter $SNYK_TOKEN as the value for the SNYK_TOKEN parameter in the Snyk pipe.</p><p><img src="../../../.gitbook/assets/uuid-6ce8d058-882c-c810-f303-c59dcaeeeda8-en (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (10) (9).png" alt="Snyk_token_in_pipeline.png"></p></li></ol><p>See <a href="https://support.atlassian.com/bitbucket-cloud/resources/">Bitbucket documentation</a> for more information about predefined variables.</p> |
| LANGUAGE                | <p>Configure the package manager of the app (for example, npm, maven, rubygems, composer, nuget or docker).</p><p>See <a href="https://hub.docker.com/r/snyk/snyk-cli/tags">Dockerhub</a> for a full list of possible tags.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| IMAGE\_NAME             | For docker language only, configure the image name for which to perform a docker scan.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| CODE\_INSIGHTS\_RESULTS | Create Code Insight report with Snyk test results. Default: false.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| SNYK\_TEST\_JSON\_INPUT | Use if you want to create only a Code Insights report from a previously generated `snyk test --json` output.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| DONT\_BREAK\_BUILD      | <p>When set to true, continues the build even when vulnerabilities are discovered.</p><p>Default: false. The build fails.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| MONITOR                 | <p>Records a snapshot of the project for the Snyk UI and then continues monitoring the project after the build is run.</p><p>If the test succeeds, this records a snapshot of the dependencies in the <a href="http://app.snyk.io">Snyk Web UI</a> and allows you to see the state of your deployed code, have it monitored, and receive alerts when new vulnerabilities are found in the code.</p><p>Default: false. The project is not monitored after the initial scan.</p>                                                                                                                                                                                                                                                                                                                                                                                                                         |
| SEVERITY\_THRESHOLD     | <p>Reports issues equal to or higher than the configured level. Possible values: low, med, high, critical</p><p>Default: low. All vulnerabilities are reported.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ORGANIZATION            | <p>Configures the organization from your Snyk account to which to associate the repository.</p><p>Default: none.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| PROJECT\_FOLDER         | <p>The folder in which the project resides.</p><p>Default: ..</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| TARGET\_FILE            | <p>The package file (for example <code>package.json</code>), equivalent to <code>--file=</code> in the CLI.</p><p>For Docker enter the Dockerfile as the value.</p><p>Default: none.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| EXTRA\_ARGS             | <p>Extra arguments to be passed to the Snyk CLI. Use the parameters and arguments as described here.</p><p>Default: none.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| DEBUG                   | <p>Turn on extra debug information.</p><p>Default: false</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
